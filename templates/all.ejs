<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>links</title>
    <!-- CSS only -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
        integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
</head>

<body>
    <div class="container">
        <h1>links</h1>
        <a href="/add">Adcionar links</a>
        <%for(let key in links){%>
            <div class="p-3 card mt-3" id="<%=links[key]._id%>">
                <form class="d-flex aling-items-center justify-content-between" method="POST" action="/?_method=DELETE">
                    <div class="d-flex flex-column">
                        <h2> <%=links[key].title%></h2>
                        <div><%=links[key].description%></div>
                        <div class="text-muted"><%=links[key].url%></div>
                        <div class="text-info">Clicks <%=links[key].click%></div>
                    </div>
                    <div class="d-flex flex-column">
                        <input type="text" name="id" value="<%=links[key]._id%>" hidden>
                        <a class="btn btn-info mb-1" href="/edit/<%=links[key]._id%>">Edit</a>
                        <button class="btn btn-danger" type="submit">delete</button>
                    </div>
                </form>
            </div>
            <%}%>
    </div>

    <!-- <script>

                function deleteLink(id) {

                    fetch('/'+ id, {
                        method: 'DELETE'
                    })
                        .then((res) => {

                            if (res.status == 200) {
                                res.text().then((linkId) => {
                                    document.getElementById(linkId).remove()

                                })
                            } else {
                                res.json().then((erro) => {
                                    alert(erro.message)
                                    console.log(erro.message)
                                })
                            }

                        })

                }

            </script> -->
</body>

</html>